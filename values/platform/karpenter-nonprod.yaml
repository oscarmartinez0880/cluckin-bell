karpenter:
  enabled: true
  
  settings:
    clusterName: cluckn-bell-nonprod
    clusterEndpoint: ""  # Set after cluster creation
    interruptionQueue: cluckn-bell-nonprod-karpenter
  
  serviceAccount:
    annotations:
      eks.amazonaws.com/role-arn: ""  # Set from Terraform output

nodePools:
  default:
    enabled: true
    disruption:
      consolidationPolicy: WhenEmptyOrUnderutilized
      consolidateAfter: 30s
    limits:
      cpu: 50
      memory: 50Gi
    requirements:
      - key: kubernetes.io/arch
        operator: In
        values: ["amd64"]
      - key: kubernetes.io/os
        operator: In
        values: ["linux"]
      - key: karpenter.sh/capacity-type
        operator: In
        values: ["spot", "on-demand"]
      - key: karpenter.k8s.aws/instance-category
        operator: In
        values: ["m", "c", "r"]
      - key: karpenter.k8s.aws/instance-generation
        operator: Gt
        values: ["5"]
      - key: karpenter.k8s.aws/instance-size
        operator: In
        values: ["medium", "large", "xlarge"]

ec2NodeClass:
  amiFamily: AL2023
  subnetSelectorTerms:
    - tags:
        karpenter.sh/discovery: cluckn-bell-nonprod
  securityGroupSelectorTerms:
    - tags:
        karpenter.sh/discovery: cluckn-bell-nonprod
  instanceProfile: cluckn-bell-nonprod-karpenter-node
