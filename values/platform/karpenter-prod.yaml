karpenter:
  enabled: true
  
  settings:
    clusterName: cluckn-bell-prod
    clusterEndpoint: ""  # Set after cluster creation
    interruptionQueue: cluckn-bell-prod-karpenter
  
  serviceAccount:
    annotations:
      eks.amazonaws.com/role-arn: ""  # Set from Terraform output

nodePools:
  default:
    enabled: true
    disruption:
      consolidationPolicy: WhenEmptyOrUnderutilized
      consolidateAfter: 1m
    limits:
      cpu: 100
      memory: 100Gi
    requirements:
      - key: kubernetes.io/arch
        operator: In
        values: ["amd64"]
      - key: kubernetes.io/os
        operator: In
        values: ["linux"]
      - key: karpenter.sh/capacity-type
        operator: In
        values: ["on-demand"]  # No spot for prod
      - key: karpenter.k8s.aws/instance-category
        operator: In
        values: ["m", "c", "r"]
      - key: karpenter.k8s.aws/instance-generation
        operator: Gt
        values: ["5"]
      - key: karpenter.k8s.aws/instance-size
        operator: In
        values: ["large", "xlarge", "2xlarge"]

ec2NodeClass:
  amiFamily: AL2023
  subnetSelectorTerms:
    - tags:
        karpenter.sh/discovery: cluckn-bell-prod
  securityGroupSelectorTerms:
    - tags:
        karpenter.sh/discovery: cluckn-bell-prod
  instanceProfile: cluckn-bell-prod-karpenter-node
